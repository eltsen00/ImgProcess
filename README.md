# Image Processing Tool (CImg)

这是一个基于 C++ 和 CImg 库开发的图像处理工具，提供了命令行菜单界面，支持多种图像操作，包括加载、压缩、灰度化、缩放、旋转以及格式转换等。

## 功能特性

程序启动后，将显示以下功能菜单：

1.  **加载图像**：支持读取 PNG、JPEG、PPM 格式的图像文件。
2.  **图像稀疏压缩 (三元组)**：
    *   将图像数据转换为三元组格式进行存储（模拟稀疏矩阵存储）。
    *   支持将压缩后的二进制数据保存到文件 (`.bin`)。
    *   支持从内存或文件读取压缩数据并还原图像。
3.  **图像灰度化**：将彩色图像转换为灰度图像 (公式: $Y = 0.299R + 0.587G + 0.114B$)。
4.  **图像尺寸缩放**：根据用户输入的宽度和高度调整图像大小。
5.  **图像旋转**：支持任意角度的图像旋转（正值逆时针，负值顺时针）。
6.  **JPEG 压缩**：调节 JPEG 压缩质量 (1-100)，并在内存中进行压缩与解压测试。
7.  **显示图像**：查看当前内存中的各类图像（原始、压缩后、灰度、缩放后、旋转后）。
8.  **保存图像**：将处理后的图像保存为 PNG, JPEG, PPM 等格式。

## 环境依赖

*   g++ (支持 C++20 或更高版本)
*   **库依赖** (Linux 环境):
    *   `libX11-dev` (用于显示窗口)
    *   `libjpeg-dev` (用于 JPEG 支持)
    *   `libpng-dev` (用于 PNG 支持)
    *   `zlib1g-dev` (PNG 依赖)
    *   `libpthread` (线程支持)

## 编译与运行

### 使用 g++ 命令行编译

在 `ImgProcess` 目录下运行以下命令：

```bash
g++ *.cpp -o main -std=c++20 -Wall -static-libgcc -lpthread -lX11 -ljpeg -lpng -lz
```

### 使用 VS Code 任务

本项目已配置 VS Code 构建任务，可以直接运行任务： **"C/C++: g++ CImg库编译"**。

### 运行

```bash
./main
```

## 文件结构

*   `main.cpp`: 主程序源码，包含菜单逻辑和图像处理功能。
*   `CImg.h`: CImg 图像处理库头文件。
*   `memStream.hpp`: 辅助头文件，用于支持内存流操作 (fmemopen, open_memstream 的封装或实现)。
*   `*.ppm`: 示例图像文件。

## 注意事项

*   在进行任何处理操作（如灰度化、旋转等）之前，请务必先选择 **功能 1** 加载一张图像。
*   程序交互通过控制台输入进行，请确保输入格式正确。
